<% content_for(:page_title, "Load: #{@load.pickup_location} to #{@load.dropoff_location}") %>

<%= load_map(@load) unless @hide_maps %>

<div class="show-load-map-toggle-button"><%= render 'map_toggle_button' %></div>

<p><%= link_to 'Back to loads', loads_path %></p>

<%= button_to 'Dismiss load', @load, method: :delete %>

<dl>
  <%= load_field @load, "#{@load.pickup_date&.strftime('%a %-m/%-d %H:%M')} - #{@load.pickup_location}", 'Pickup' %>
  <%= load_field @load, [@load.dropoff_date&.strftime('%a %-m/%-d %H:%M'), @load.dropoff_location].compact.join(' - '), 'Dropoff' %>
  <%= load_field @load, nil, 'Broker' do -%>
    <%= broker_data(@load) %>
  <% end %>
  <%= load_field @load, :reference_number %>
  <%= load_field @load, number_with_delimiter(@load.weight), 'Weight' %>
  <%= load_field @load, :length %>
  <%= load_field @load, @load.equipment_type && "#{@load.equipment_type_code} - #{@load.equipment_type}", 'Equipment' %>
  <%= load_field @load, "#{@load.distance} mi", 'Distance' %>
  <%= load_field @load, currency(@load.rate, show_cents: false), 'Rate' %>
  <%= load_field @load, currency(@load.rate_per_mile), 'Rate per mile' %>
  <%= load_field @load, :notes %>

  <%= content_tag :dt, 'Rates' %>
  <%= content_tag :dd do -%>
    <%= render 'rate_table', rates: (100..800).step(10).to_a, columns: 5, load: @load %>
  <% end %>

</dl>

<%= raw(ap(@load.raw, html: true)) %>
